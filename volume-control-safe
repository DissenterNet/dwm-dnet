#!/bin/bash

# Safe Volume control script for dwmblocks
# Prevents infinite spawning issues

# Check if script is already running to prevent duplicates
if pgrep -f "alsamixer" > /dev/null; then
    exit 0
fi

case "$BUTTON" in
    1) # Left click - Show volume info
        notify-send "Volume" "Audio controls available via alsamixer"
        ;;
    2) # Middle click - Open alsamixer safely
        # Add delay to prevent rapid clicking
        sleep 0.5
        st -e alsamixer &
        ;;
    3) # Right click - Volume menu
        notify-send "Audio Info" "Use alsamixer to control audio"
        ;;
esac

# Output a simple volume indicator for status bar
echo "ï€¨ Audio"
